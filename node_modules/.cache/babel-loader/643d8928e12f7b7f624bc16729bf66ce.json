{"ast":null,"code":"import React from\"react\";import{render}from\"react-dom\";import{makeData,Logo,LogoEbay,Tips}from\"./Utils\";import JSONTree from'react-json-tree';// Import React Table\nimport ReactTable from\"react-table\";import\"react-table/react-table.css\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";const JSONtheme={scheme:'monokai',author:'wimer hazenberg (http://www.monokai.nl)',base00:'#272822',base01:'#383830',base02:'#49483e',base03:'#75715e',base04:'#a59f85',base05:'#f8f8f2',base06:'#f5f4f1',base07:'#f9f8f5',base08:'#f92672',base09:'#fd971f',base0A:'#f4bf75',base0B:'#a6e22e',base0C:'#a1efe4',base0D:'#66d9ef',base0E:'#ae81ff',base0F:'#cc6633'};class Field extends React.Component{constructor(props){super(props);this.hasFocus=false;this.state={value:\"\",dirty:false,valid:false};}updateField(e){var valid=this.validate(e.target.value);this.setState({value:e.target.value,dirty:true,valid:valid});this.props.updateFunc(this.props.name,e.target.value,valid);}handleFocus(){this.setState({hasFocus:true});}handleBlur(){this.setState({hasFocus:false});}handleLabelClick(e){e.preventDefault();if(this.state.hasFocus)return false;this.refs.input.focus();this.setState({hasFocus:true});}validate(str){if(this.props.validation!=null)return str.match(this.props.validation);return false;}render(){//Add-ons for the component\nconst focusClass=this.state.value.length||this.state.hasFocus?'active':\"\";const validClass=!this.state.dirty?\"\":this.state.valid?\"valid\":\"invalid\";const validMessage=this.props.validMessage?/*#__PURE__*/_jsxs(\"span\",{className:\"valid-message\",children:[\"(\",this.props.validMessage,\")\"]}):\"\";const label=this.props.label?/*#__PURE__*/_jsxs(\"label\",{htmlFor:this.props.name,onClick:e=>{this.handleLabelClick(e);},children:[this.props.label,\" \",validMessage]}):\"\";const icon=!this.props.icon?\"\":this.state.valid?/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-thumbs-up\"}):/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-\".concat(this.props.icon)});//component -- switch this to an HOC later\nswitch(this.props.type){case'input':return/*#__PURE__*/_jsxs(\"td\",{className:\"form-group \".concat(focusClass),valign:\"top\",children:[/*#__PURE__*/_jsx(\"div\",{children:label}),/*#__PURE__*/_jsx(\"input\",{ref:\"input\",className:\"form-control  \".concat(validClass),name:this.props.name,id:this.props.name,type:this.props.subtype,required:this.props.required,value:this.state.value,onChange:e=>{this.updateField(e);},onFocus:e=>{this.handleFocus();},onBlur:e=>{this.handleBlur();}}),icon]});case'textarea':return/*#__PURE__*/_jsxs(\"td\",{className:\"form-group \".concat(focusClass),align:\"top\",children:[/*#__PURE__*/_jsx(\"div\",{children:label}),/*#__PURE__*/_jsx(\"textarea\",{ref:\"input\",className:\"form-control  \".concat(validClass),name:this.props.name,id:this.props.name,required:this.props.required,onChange:e=>{this.updateField(e);},onFocus:e=>{this.handleFocus();},onBlur:e=>{this.handleBlur();},children:this.state.value}),icon]});default:return/*#__PURE__*/_jsx(\"td\",{children:\"incomplete field\"});}}}class SearchBar extends React.Component{constructor(props){super(props);this.handleSubmit=event=>{event.preventDefault();console.log(this.state);console.log(this.fields);console.log(event);let p={};p=Object.keys(this.state).filter(k=>this.state[k].valid);let params={};p.map(k=>params[k]=event.target[k].value);params.rows=this.state.pageSize;params.page=this.state.page;//    event.target.keywords.value;\nconsole.log(params);this.props.handleSubmit(params);};this.fields=[{name:'keywords',type:'input',subtype:'text',label:\"Keywords\",icon:\"user\",validation:'name',required:true,validMessage:\"\",valid:false},{name:'minprice',type:'input',subtype:'text',label:\"Min Price\",icon:\"user\",validation:'number',required:false,validMessage:\"\",valid:false,value:0},{name:'maxprice',type:'input',subtype:'text',label:\"Max Price\",icon:\"user\",validation:'number',required:false,validMessage:\"\",valid:false,value:100}];this.validation={/*whatever regex rules you want. There's no reason to restrict validation to a regex but I'm laaaaazy.*/email:/[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9-]+(\\.[a-z0-9-]+)*/,name:/[a-zA-Z0-9]{3,}/,message:/.?/,number:/\\d+/};this.state=makeDefaultState();this.fields.map(field=>{this.state[field.name]={content:false,valid:false};});}updateField(field,value,valid){var obj={};obj[field]={content:value,valid:valid};this.setState(obj);}validate(e){e.preventDefault();for(let i in this.state){if(this.fields[i]!=null)if(!this.state[i].valid&&this.fields[i].required)return false;//        if(!this.state[i].valid) return false;\n}console.log('all clear');return true;}componentDidMount(){console.log('App componentDidMount');}renderFields(){return this.fields.map(field=>{return/*#__PURE__*/_jsx(Field,{type:field.type,subtype:field.subtype,name:field.name,label:field.label,required:field.required,updateFunc:this.updateField.bind(this),validation:this.validation[field.validation],validMessage:field.validMessage,icon:field.icon,value:field.value},field.name);});}render(){return/*#__PURE__*/_jsx(\"form\",{onSubmit:e=>{if(this.validate(e))this.handleSubmit(e);},children:/*#__PURE__*/_jsx(\"table\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[this.renderFields(),/*#__PURE__*/_jsx(\"td\",{className:\"container\",children:/*#__PURE__*/_jsx(\"input\",{className:\"\",type:\"submit\",value:\"Send\"})})]})})});}}const makeDefaultState=()=>({data:[],columns:[],sorted:[],page:0,pageSize:10,expanded:{},resized:[],filtered:[],loading:true,loadingText:\"Loading..\",rows:10});class App extends React.Component{constructor(prop){super(prop);this.fetchColumns=resultset=>{this.setState({loading:true});this.setState({loadingText:\"Loading\"});console.log(\"sending get request\");//orkerGlobalScope.fetch(\"http://yogapants.ewb.ai:8080/data?test=test\", {\nfetch(\"http://mx.ewb.ai:8080/myapp?keywords=\"+resultset).then(response=>response.json()).then(result=>{console.log(\"result\");//console.log(result);\nthis.setState({loading:false,data:result.data});}).catch(err=>{console.log(\"API Call returned invalid JSON\");console.log(err);});};this.state=makeDefaultState();this.rowEvent={onClick:(e,row,rowIndex)=>{this.setState({details:true,id:rowIndex});}};this.fetchData=this.fetchData.bind(this);}componentDidMount(){console.log('App componentDidMount');}fetchData(params){this.setState({loading:true});this.setState({loadingText:\"Loading\"});//orkerGlobalScope.fetch(\"http://yogapants.ewb.ai:8080/data?test=test\", {\nlet array=Object.keys(params).map(key=>key+'='+params[key]);console.log('fetchData: '+array);let Qstr=array.join('&');if(Qstr.length>0)Qstr='?'+Qstr;console.log(\"sending get request, Query String: [\"+Qstr+\"]\");fetch(\"http://skyhawk.grandstreet.group:8080/myapp\"+Qstr).then(response=>response.json()).then(result=>{console.log(\"result\");this.setState({loading:false,data:result.data,pages:Math.ceil(result.data.length/this.state.pageSize)});}).catch(err=>{console.log(\"API Call returned invalid JSON\");console.log(err);});}getColumns(){const data=this.state.data;//console.log(data);\nif(data.length<=0)return data;let headers={'condition_conditionDisplayName':'condition','listingInfo_bestOfferEnabled':'Has BestOffer','listingInfo_buyItNowAvailable':'Has BuyItNow','listingInfo_endTime':'EndTime','listingInfo_listingType':'ListingType','listingInfo_watchCount':'WatchCount','returnsAccepted':'Can Return','sellingStatus_convertedCurrentPrice_content':'Current Price','sellingStatus_timeLeft':'Time Left','shippingInfo_handlingTime':'Handling Time','shippingInfo_shipToLocations':'ShipTo'};let whitelist=['error','condition_conditionDisplayName','country','itemId','listingInfo_bestOfferEnabled','listingInfo_buyItNowAvailable','listingInfo_endTime','listingInfo_listingType','listingInfo_watchCount','location','returnsAccepted','sellingStatus_convertedCurrentPrice_content','sellingStatus_timeLeft','shippingInfo_handlingTime','shippingInfo_shipToLocations','title','viewItemURL'];//\nreturn Object.keys(data[0]).filter(key=>whitelist.indexOf(key)>=0).map(key=>{let column={Header:key,accessor:key};if(headers[key]!=null){column.Header=headers[key];}let str=column.Header;column.Header=str.slice(0,1).toUpperCase()+str.substr(1,str.length);//  view data munger\n//\nif(key.match(/[Uu][Rr][Ll]/)){column.Cell=row=>/*#__PURE__*/_jsx(\"a\",{href:row.value,target:\"_blank\",children:key});}return column;});}render(){const columns=this.getColumns();const _this$state=this.state,data=_this$state.data,rows=_this$state.rows,pages=_this$state.pages;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(SearchBar,{handleSubmit:this.fetchData,keywords:\"type some keywords\"})}),/*#__PURE__*/_jsx(ReactTable,{manual:true,data:data,columns:columns,pages:pages,loading:this.state.loading,loadingText:this.state.loadingText,defaultPageSize:20,filterable:true,className:\"-striped -highlight\",sorted:this.state.sorted,page:this.state.page,pageSize:this.state.pageSize,expanded:this.state.expanded,resized:this.state.resized,filtered:this.state.filtered// Callbacks\n,onSortedChange:sorted=>this.setState({sorted}),onPageChange:page=>this.setState({page}),onPageSizeChange:(pageSize,page)=>this.setState({page,pageSize}),onExpandedChange:expanded=>this.setState({expanded}),onResizedChange:resized=>this.setState({resized}),onFilteredChange:filtered=>this.setState({filtered})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"pre\",{children:/*#__PURE__*/_jsxs(\"code\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"this.state ===\"}),\" \",JSON.stringify(this.state.resized,null,2),JSON.stringify(this.state.sorted,null,2),JSON.stringify(this.state.filtered,null,2)]})}),/*#__PURE__*/_jsx(Tips,{}),/*#__PURE__*/_jsx(LogoEbay,{}),/*#__PURE__*/_jsx(Logo,{})]});}}render(/*#__PURE__*/_jsx(App,{}),document.getElementById(\"root\"));","map":{"version":3,"sources":["/home/nathaniel/src/git/reactDataTable/src/index.js"],"names":["React","render","makeData","Logo","LogoEbay","Tips","JSONTree","ReactTable","JSONtheme","scheme","author","base00","base01","base02","base03","base04","base05","base06","base07","base08","base09","base0A","base0B","base0C","base0D","base0E","base0F","Field","Component","constructor","props","hasFocus","state","value","dirty","valid","updateField","e","validate","target","setState","updateFunc","name","handleFocus","handleBlur","handleLabelClick","preventDefault","refs","input","focus","str","validation","match","focusClass","length","validClass","validMessage","label","icon","type","subtype","required","SearchBar","handleSubmit","event","console","log","fields","p","Object","keys","filter","k","params","map","rows","pageSize","page","email","message","number","makeDefaultState","field","content","obj","i","componentDidMount","renderFields","bind","data","columns","sorted","expanded","resized","filtered","loading","loadingText","App","prop","fetchColumns","resultset","fetch","then","response","json","result","catch","err","rowEvent","onClick","row","rowIndex","details","id","fetchData","array","key","Qstr","join","pages","Math","ceil","getColumns","headers","whitelist","indexOf","column","Header","accessor","slice","toUpperCase","substr","Cell","JSON","stringify","document","getElementById"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { render } from \"react-dom\";\nimport { makeData, Logo, LogoEbay, Tips } from \"./Utils\";\n\nimport JSONTree from 'react-json-tree';\n// Import React Table\nimport ReactTable from \"react-table\";\nimport \"react-table/react-table.css\";\n\nconst JSONtheme = {\n  scheme: 'monokai',\n  author: 'wimer hazenberg (http://www.monokai.nl)',\n  base00: '#272822',\n  base01: '#383830',\n  base02: '#49483e',\n  base03: '#75715e',\n  base04: '#a59f85',\n  base05: '#f8f8f2',\n  base06: '#f5f4f1',\n  base07: '#f9f8f5',\n  base08: '#f92672',\n  base09: '#fd971f',\n  base0A: '#f4bf75',\n  base0B: '#a6e22e',\n  base0C: '#a1efe4',\n  base0D: '#66d9ef',\n  base0E: '#ae81ff',\n  base0F: '#cc6633'\n}\n\nclass Field extends React.Component {\n  constructor(props){\n    super(props);\n    this.hasFocus = false;\n    this.state={value: \"\", dirty:false, valid:false}\n  }\n  updateField(e){\n    var valid = this.validate(e.target.value)\n    this.setState({value: e.target.value, dirty:true, valid:valid});\n    this.props.updateFunc(this.props.name, e.target.value, valid)\n  }\n  handleFocus(){\n    this.setState({hasFocus:true});\n  }\n  handleBlur(){\n    this.setState({hasFocus:false});\n  }\n  handleLabelClick(e){\n    e.preventDefault();\n    if(this.state.hasFocus) return false;\n    this.refs.input.focus();\n    this.setState({hasFocus: true})\n  }\n  validate(str){\n    if (this.props.validation != null)\n      return str.match(this.props.validation);\n    return false;\n  }\n  render(){\n    //Add-ons for the component\n    const focusClass = this.state.value.length || this.state.hasFocus ? 'active' : \"\";\n    const validClass = !this.state.dirty ? \"\" : this.state.valid ? \"valid\" : \"invalid\";\n    const validMessage = this.props.validMessage ? <span className=\"valid-message\">({this.props.validMessage})</span> : \"\";\n    const label = this.props.label ? \n              <label htmlFor={this.props.name} onClick={(e)=>{this.handleLabelClick(e)}}>{this.props.label} {validMessage}</label> : \"\";\n    const icon = !this.props.icon ? \"\" : this.state.valid ? <i className={`fa fa-thumbs-up`} /> : <i className={`fa fa-${this.props.icon}`} />;\n    \n    //component -- switch this to an HOC later\n    switch(this.props.type){\n      case 'input':\n        return(\n          <td className={`form-group ${focusClass}`} valign=\"top\">\n            <div>{label}</div>\n            <input ref=\"input\" className={`form-control  ${validClass}`} name={this.props.name} id={this.props.name} type={this.props.subtype} required={this.props.required} value={this.state.value} onChange={(e)=>{this.updateField(e)}} onFocus={(e)=>{this.handleFocus()}} onBlur={(e)=>{this.handleBlur()}} />\n            {icon}\n          </td>\n        )\n      case 'textarea':\n        return (\n          <td className={`form-group ${focusClass}`} align=\"top\">\n            <div>{label}</div>\n            <textarea ref=\"input\" className={`form-control  ${validClass}`} name={this.props.name} id={this.props.name} required={this.props.required} onChange={(e)=>{this.updateField(e)}} onFocus={(e)=>{this.handleFocus()}} onBlur={(e)=>{this.handleBlur()}}>{this.state.value}</textarea>\n            {icon}\n          </td>\n        )\n      default:\n        return <td>incomplete field</td>\n    }  \n  }\n}\n\n\nclass SearchBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.fields = [\n    {name:'keywords', type:'input', subtype:'text', label:\"Keywords\", icon:\"user\", validation:'name', required:true, validMessage:\"\", valid:false},\n    {name:'minprice', type:'input', subtype:'text', label:\"Min Price\", icon:\"user\", validation:'number', required:false, validMessage:\"\", valid:false, value:0},\n    {name:'maxprice', type:'input', subtype:'text', label:\"Max Price\", icon:\"user\", validation:'number', required:false, validMessage:\"\", valid:false, value:100},\n    ]\n        this.validation={\n      /*whatever regex rules you want. There's no reason to restrict validation to a regex but I'm laaaaazy.*/ \n      email:/[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9-]+(\\.[a-z0-9-]+)*/,\n      name:/[a-zA-Z0-9]{3,}/,\n      message:/.?/,\n      number:/\\d+/\n    }\n    this.state = makeDefaultState()\n    this.fields.map(field=>{\n      this.state[field.name] = {content:false, valid:false}\n    });\n  }\n    \n  handleSubmit = (event) => {\n    event.preventDefault();\n    console.log(this.state);\n    console.log(this.fields);\n    console.log(event);\n    let p = {};\n    p = Object.keys(this.state).filter(k => this.state[k].valid);\n    let params = {}\n    p.map( k => params[k] = event.target[k].value);\n    params.rows = this.state.pageSize\n    params.page = this.state.page\n//    event.target.keywords.value;\n    console.log(params);\n    this.props.handleSubmit(params);\n  };\n  updateField(field, value, valid){\n    var obj = {};\n    obj[field] = {content:value, valid:valid};\n    this.setState(obj);\n  }\n  validate(e){\n    e.preventDefault();\n    for(let i in this.state){\n     if (this.fields[i] != null)\n        if(!this.state[i].valid && this.fields[i].required) return false;\n//        if(!this.state[i].valid) return false;\n    }\n    console.log('all clear')\n    return true;\n  }\n  componentDidMount() {\n    console.log('App componentDidMount')\n  }\n  renderFields(){\n    return this.fields.map(field=>{\n      return <Field type={field.type} subtype={field.subtype} name={field.name} label={field.label} required={field.required} key={field.name} updateFunc={this.updateField.bind(this)} validation={this.validation[field.validation]} validMessage={field.validMessage} icon={field.icon} value={field.value}/>\n    })\n  }\n  render() {\n    return (\n      <form onSubmit={(e)=>{if (this.validate(e)) this.handleSubmit(e)}}>\n      <table><tr> \n       {this.renderFields()}\n        <td className=\"container\">\n          <input className=\"\" type=\"submit\" value=\"Send\" />\n        </td>\n      </tr></table>\n      </form>\n    );\n  }\n}\n\nconst makeDefaultState = () => ({\n  data: [],\n  columns: [],\n  sorted: [],\n  page: 0,\n  pageSize: 10,\n  expanded: {},\n  resized: [],\n  filtered: [],\n  loading: true,\n  loadingText: \"Loading..\",\n  rows: 10\n});\n\nclass App extends React.Component {\n  constructor(prop) {\n    super(prop);\n   this.state = makeDefaultState();\n    this.rowEvent = {\n      onClick: (e, row, rowIndex) => {\n        this.setState({details: true, id:rowIndex});\n      }\n    };\n    this.fetchData = this.fetchData.bind(this);\n  }\n  componentDidMount() {\n    console.log('App componentDidMount')\n  }\n\n  fetchData(params) {\n    this.setState({loading: true});\n    this.setState({loadingText: \"Loading\"});\n    //orkerGlobalScope.fetch(\"http://yogapants.ewb.ai:8080/data?test=test\", {\n\n    let array = Object.keys(params).map( key => key+'='+params[key]);\n    console.log('fetchData: '+array);\n    let Qstr = array.join('&');\n    if (Qstr.length > 0)\n      Qstr = '?'+Qstr;\n\n    console.log(\"sending get request, Query String: [\"+Qstr+\"]\");\n    fetch(\"http://skyhawk.grandstreet.group:8080/myapp\"+Qstr)\n      .then(response => response.json())\n      .then((result) => {\n        console.log(\"result\");\n        this.setState({\n          loading: false,\n          data: result.data,\n          pages: Math.ceil(result.data.length / this.state.pageSize)\n        });\n      })\n      .catch((err) => {\n        console.log(\"API Call returned invalid JSON\");\n        console.log(err);\n      });\n  }\n  fetchColumns = (resultset) => {\n    this.setState({loading: true});\n    this.setState({loadingText: \"Loading\"});\n    console.log(\"sending get request\");\n    //orkerGlobalScope.fetch(\"http://yogapants.ewb.ai:8080/data?test=test\", {\n\n    fetch(\"http://mx.ewb.ai:8080/myapp?keywords=\"+resultset)\n      .then(response => response.json())\n      .then((result) => {\n        console.log(\"result\");\n        //console.log(result);\n        this.setState({\n          loading: false,\n          data: result.data\n        });\n      })\n      .catch((err) => {\n        console.log(\"API Call returned invalid JSON\");\n        console.log(err);\n      });\n  }\n  getColumns() {\n    const { data } = this.state;\n    //console.log(data);\n    if (data.length <= 0)\n      return data;\n    \n    let headers = {'condition_conditionDisplayName':'condition','listingInfo_bestOfferEnabled':'Has BestOffer','listingInfo_buyItNowAvailable':'Has BuyItNow','listingInfo_endTime':'EndTime','listingInfo_listingType':'ListingType','listingInfo_watchCount':'WatchCount','returnsAccepted':'Can Return','sellingStatus_convertedCurrentPrice_content':'Current Price','sellingStatus_timeLeft':'Time Left','shippingInfo_handlingTime':'Handling Time','shippingInfo_shipToLocations':'ShipTo'};\n    let whitelist = ['error','condition_conditionDisplayName','country','itemId','listingInfo_bestOfferEnabled','listingInfo_buyItNowAvailable','listingInfo_endTime','listingInfo_listingType','listingInfo_watchCount','location','returnsAccepted','sellingStatus_convertedCurrentPrice_content','sellingStatus_timeLeft','shippingInfo_handlingTime','shippingInfo_shipToLocations','title','viewItemURL'];\n    //\n    return Object.keys(data[0]).filter( key => whitelist.indexOf(key) >= 0)\n      .map(key => {\n      let column = {\n        Header: key,\n        accessor: key\n      };\n      \n      if (headers[key] != null) {\n        column.Header = headers[key]\n      }\n      let str = column.Header\n      column.Header = str.slice(0, 1).toUpperCase() + str.substr(1,str.length);\n\n      //  view data munger\n      //\n      if (key.match(/[Uu][Rr][Ll]/)) {\n        column.Cell = row => (\n          <a href={row.value} target=\"_blank\">{key}</a>\n        )\n      }\n      return column;\n    });\n  }\n  render() {\n    const columns = this.getColumns();\n    const { data, rows, pages } = this.state;\n    return (\n      <div>\n      <div>\n  <SearchBar handleSubmit={this.fetchData} keywords=\"type some keywords\"/>\n      </div>\n        <ReactTable\n      manual\n      data={data}\n      columns={columns}\n      pages={pages}\n      loading={this.state.loading}\n      loadingText={this.state.loadingText}\n      defaultPageSize={20}\n      filterable\n      className=\"-striped -highlight\"\n      sorted={this.state.sorted}\n      page={this.state.page}\n      pageSize={this.state.pageSize}\n      expanded={this.state.expanded}\n      resized={this.state.resized}\n      filtered={this.state.filtered}\n      // Callbacks\n      onSortedChange={sorted => this.setState({ sorted })}\n      onPageChange={page => this.setState({ page })}\n      onPageSizeChange={(pageSize, page) =>\n        this.setState({ page, pageSize })}\n      onExpandedChange={expanded => this.setState({ expanded })}\n      onResizedChange={resized => this.setState({ resized })}\n      onFilteredChange={filtered => this.setState({ filtered })}\n        />\n\n        <br />\n          <pre>\n          <code>\n            <strong>this.state ===</strong>{\" \"}\n            {JSON.stringify(this.state.resized, null, 2)}\n            {JSON.stringify(this.state.sorted, null, 2)}\n            {JSON.stringify(this.state.filtered, null, 2)}\n          </code>\n        </pre>\n        <Tips />\n        <LogoEbay />\n        <Logo />\n      </div>\n    );\n  }\n}\n\nrender(<App />, document.getElementById(\"root\"));\n\n"]},"metadata":{},"sourceType":"module"}