{"ast":null,"code":"var _jsxFileName = \"/home/nathaniel/src/git/reactDataTable/src/index.js\";\nimport React from \"react\";\nimport { render } from \"react-dom\";\nimport { makeData, Logo, LogoEbay, Tips } from \"./Utils\";\nimport JSONTree from 'react-json-tree'; // Import React Table\n\nimport ReactTable from \"react-table\";\nimport \"react-table/react-table.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst JSONtheme = {\n  scheme: 'monokai',\n  author: 'wimer hazenberg (http://www.monokai.nl)',\n  base00: '#272822',\n  base01: '#383830',\n  base02: '#49483e',\n  base03: '#75715e',\n  base04: '#a59f85',\n  base05: '#f8f8f2',\n  base06: '#f5f4f1',\n  base07: '#f9f8f5',\n  base08: '#f92672',\n  base09: '#fd971f',\n  base0A: '#f4bf75',\n  base0B: '#a6e22e',\n  base0C: '#a1efe4',\n  base0D: '#66d9ef',\n  base0E: '#ae81ff',\n  base0F: '#cc6633'\n};\n\nclass Field extends React.Component {\n  constructor(props) {\n    super(props);\n    this.hasFocus = false;\n    this.state = {\n      value: \"\",\n      dirty: false,\n      valid: false\n    };\n  }\n\n  updateField(e) {\n    var valid = this.validate(e.target.value);\n    this.setState({\n      value: e.target.value,\n      dirty: true,\n      valid: valid\n    });\n    this.props.updateFunc(this.props.name, e.target.value, valid);\n  }\n\n  handleFocus() {\n    this.setState({\n      hasFocus: true\n    });\n  }\n\n  handleBlur() {\n    this.setState({\n      hasFocus: false\n    });\n  }\n\n  handleLabelClick(e) {\n    e.preventDefault();\n    if (this.state.hasFocus) return false;\n    this.refs.input.focus();\n    this.setState({\n      hasFocus: true\n    });\n  }\n\n  validate(str) {\n    if (this.props.validation != null) return str.match(this.props.validation);\n    return false;\n  }\n\n  render() {\n    //Add-ons for the component\n    const focusClass = this.state.value.length || this.state.hasFocus ? 'active' : \"\";\n    const validClass = !this.state.dirty ? \"\" : this.state.valid ? \"valid\" : \"invalid\";\n    const validMessage = this.props.validMessage ? /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"valid-message\",\n      children: [\"(\", this.props.validMessage, \")\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 52\n    }, this) : \"\";\n    const label = this.props.label ? /*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: this.props.name,\n      onClick: e => {\n        this.handleLabelClick(e);\n      },\n      children: [this.props.label, \" \", validMessage]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 15\n    }, this) : \"\";\n    const icon = !this.props.icon ? \"\" : this.state.valid ? /*#__PURE__*/_jsxDEV(\"i\", {\n      className: \"fa fa-thumbs-up\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 61\n    }, this) : /*#__PURE__*/_jsxDEV(\"i\", {\n      className: \"fa fa-\".concat(this.props.icon)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 99\n    }, this); //component -- switch this to an HOC later\n\n    switch (this.props.type) {\n      case 'input':\n        return /*#__PURE__*/_jsxDEV(\"td\", {\n          className: \"form-group \".concat(focusClass),\n          valign: \"top\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: label\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            ref: \"input\",\n            className: \"form-control  \".concat(validClass),\n            name: this.props.name,\n            id: this.props.name,\n            type: this.props.subtype,\n            required: this.props.required,\n            value: this.state.value,\n            onChange: e => {\n              this.updateField(e);\n            },\n            onFocus: e => {\n              this.handleFocus();\n            },\n            onBlur: e => {\n              this.handleBlur();\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), icon]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this);\n\n      case 'textarea':\n        return /*#__PURE__*/_jsxDEV(\"td\", {\n          className: \"form-group \".concat(focusClass),\n          align: \"top\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: label\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            ref: \"input\",\n            className: \"form-control  \".concat(validClass),\n            name: this.props.name,\n            id: this.props.name,\n            required: this.props.required,\n            onChange: e => {\n              this.updateField(e);\n            },\n            onFocus: e => {\n              this.handleFocus();\n            },\n            onBlur: e => {\n              this.handleBlur();\n            },\n            children: this.state.value\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), icon]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this);\n\n      default:\n        return /*#__PURE__*/_jsxDEV(\"td\", {\n          children: \"incomplete field\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 16\n        }, this);\n    }\n  }\n\n}\n\nclass SearchBar extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      console.log(this.state);\n      console.log(this.fields);\n      console.log(event);\n      let p = {};\n      p = Object.keys(this.state).filter(k => this.state[k].valid);\n      let params = {};\n      p.map(k => params[k] = event.target[k].value);\n      params.rows = this.state.pageSize;\n      params.page = this.state.page; //    event.target.keywords.value;\n\n      console.log(params);\n      this.props.handleSubmit(params);\n    };\n\n    this.fields = [{\n      name: 'keywords',\n      type: 'input',\n      subtype: 'text',\n      label: \"Keywords\",\n      icon: \"user\",\n      validation: 'name',\n      required: true,\n      validMessage: \"\",\n      valid: false\n    }, {\n      name: 'minprice',\n      type: 'input',\n      subtype: 'text',\n      label: \"Min Price\",\n      icon: \"user\",\n      validation: 'number',\n      required: false,\n      validMessage: \"\",\n      valid: false,\n      value: 0\n    }, {\n      name: 'maxprice',\n      type: 'input',\n      subtype: 'text',\n      label: \"Max Price\",\n      icon: \"user\",\n      validation: 'number',\n      required: false,\n      validMessage: \"\",\n      valid: false,\n      value: 100\n    }];\n    this.validation = {\n      /*whatever regex rules you want. There's no reason to restrict validation to a regex but I'm laaaaazy.*/\n      email: /[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9-]+(\\.[a-z0-9-]+)*/,\n      name: /[a-zA-Z0-9]{3,}/,\n      message: /.?/,\n      number: /\\d+/\n    };\n    this.state = makeDefaultState();\n    this.fields.map(field => {\n      this.state[field.name] = {\n        content: false,\n        valid: false\n      };\n    });\n  }\n\n  updateField(field, value, valid) {\n    var obj = {};\n    obj[field] = {\n      content: value,\n      valid: valid\n    };\n    this.setState(obj);\n  }\n\n  validate(e) {\n    e.preventDefault();\n\n    for (let i in this.state) {\n      if (this.fields[i] != null) if (!this.state[i].valid && this.fields[i].required) return false; //        if(!this.state[i].valid) return false;\n    }\n\n    console.log('all clear');\n    return true;\n  }\n\n  componentDidMount() {\n    console.log('App componentDidMount');\n  }\n\n  renderFields() {\n    return this.fields.map(field => {\n      return /*#__PURE__*/_jsxDEV(Field, {\n        type: field.type,\n        subtype: field.subtype,\n        name: field.name,\n        label: field.label,\n        required: field.required,\n        updateFunc: this.updateField.bind(this),\n        validation: this.validation[field.validation],\n        validMessage: field.validMessage,\n        icon: field.icon,\n        value: field.value\n      }, field.name, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 14\n      }, this);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: e => {\n        if (this.validate(e)) this.handleSubmit(e);\n      },\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [this.renderFields(), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"container\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              className: \"\",\n              type: \"submit\",\n              value: \"Send\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 14\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst makeDefaultState = () => ({\n  data: [],\n  columns: [],\n  sorted: [],\n  page: 0,\n  pageSize: 10,\n  expanded: {},\n  resized: [],\n  filtered: [],\n  loading: true,\n  loadingText: \"Loading..\",\n  rows: 10\n});\n\nclass App extends React.Component {\n  constructor(prop) {\n    super(prop);\n\n    this.fetchColumns = resultset => {\n      this.setState({\n        loading: true\n      });\n      this.setState({\n        loadingText: \"Loading\"\n      });\n      console.log(\"sending get request\"); //orkerGlobalScope.fetch(\"http://yogapants.ewb.ai:8080/data?test=test\", {\n\n      fetch(\"http://mx.ewb.ai:8080/myapp?keywords=\" + resultset).then(response => response.json()).then(result => {\n        console.log(\"result\"); //console.log(result);\n\n        this.setState({\n          loading: false,\n          data: result.data\n        });\n      }).catch(err => {\n        console.log(\"API Call returned invalid JSON\");\n        console.log(err);\n      });\n    };\n\n    this.state = makeDefaultState();\n    this.rowEvent = {\n      onClick: (e, row, rowIndex) => {\n        this.setState({\n          details: true,\n          id: rowIndex\n        });\n      }\n    };\n    this.fetchData = this.fetchData.bind(this);\n  }\n\n  componentDidMount() {\n    console.log('App componentDidMount');\n  }\n\n  fetchData(params) {\n    this.setState({\n      loading: true\n    });\n    this.setState({\n      loadingText: \"Loading\"\n    }); //orkerGlobalScope.fetch(\"http://yogapants.ewb.ai:8080/data?test=test\", {\n\n    let array = Object.keys(params).map(key => key + '=' + params[key]);\n    console.log('fetchData: ' + array);\n    let Qstr = array.join('&');\n    if (Qstr.length > 0) Qstr = '?' + Qstr;\n    console.log(\"sending get request, Query String: [\" + Qstr + \"]\");\n    fetch(\"http://skyhawk.grandstreet.group:8080/myapp\" + Qstr).then(response => response.json()).then(result => {\n      console.log(\"result\");\n      this.setState({\n        loading: false,\n        data: result.data,\n        pages: Math.ceil(result.data.length / this.state.pageSize)\n      });\n    }).catch(err => {\n      console.log(\"API Call returned invalid JSON\");\n      console.log(err);\n    });\n  }\n\n  getColumns() {\n    const data = this.state.data; //console.log(data);\n\n    if (data.length <= 0) return data;\n    let headers = {\n      'condition_conditionDisplayName': 'condition',\n      'listingInfo_bestOfferEnabled': 'Has BestOffer',\n      'listingInfo_buyItNowAvailable': 'Has BuyItNow',\n      'listingInfo_endTime': 'EndTime',\n      'listingInfo_listingType': 'ListingType',\n      'listingInfo_watchCount': 'WatchCount',\n      'returnsAccepted': 'Can Return',\n      'sellingStatus_convertedCurrentPrice_content': 'Current Price',\n      'sellingStatus_timeLeft': 'Time Left',\n      'shippingInfo_handlingTime': 'Handling Time',\n      'shippingInfo_shipToLocations': 'ShipTo'\n    };\n    let whitelist = ['error', 'condition_conditionDisplayName', 'country', 'itemId', 'listingInfo_bestOfferEnabled', 'listingInfo_buyItNowAvailable', 'listingInfo_endTime', 'listingInfo_listingType', 'listingInfo_watchCount', 'location', 'returnsAccepted', 'sellingStatus_convertedCurrentPrice_content', 'sellingStatus_timeLeft', 'shippingInfo_handlingTime', 'shippingInfo_shipToLocations', 'title', 'viewItemURL']; //\n\n    return Object.keys(data[0]).filter(key => whitelist.indexOf(key) >= 0).map(key => {\n      let column = {\n        Header: key,\n        accessor: key\n      };\n\n      if (headers[key] != null) {\n        column.Header = headers[key];\n      }\n\n      let str = column.Header;\n      column.Header = str.slice(0, 1).toUpperCase() + str.substr(1, str.length); //  view data munger\n      //\n\n      if (key.match(/[Uu][Rr][Ll]/)) {\n        column.Cell = row => /*#__PURE__*/_jsxDEV(\"a\", {\n          href: row.value,\n          target: \"_blank\",\n          children: key\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 11\n        }, this);\n      }\n\n      return column;\n    });\n  }\n\n  render() {\n    const columns = this.getColumns();\n    const _this$state = this.state,\n          data = _this$state.data,\n          rows = _this$state.rows,\n          pages = _this$state.pages;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(SearchBar, {\n          handleSubmit: this.fetchData,\n          keywords: \"type some keywords\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 3\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(ReactTable, {\n        manual: true,\n        data: data,\n        columns: columns,\n        pages: pages,\n        loading: this.state.loading,\n        loadingText: this.state.loadingText,\n        defaultPageSize: 20,\n        filterable: true,\n        className: \"-striped -highlight\",\n        sorted: this.state.sorted,\n        page: this.state.page,\n        pageSize: this.state.pageSize,\n        expanded: this.state.expanded,\n        resized: this.state.resized,\n        filtered: this.state.filtered // Callbacks\n        ,\n        onSortedChange: sorted => this.setState({\n          sorted\n        }),\n        onPageChange: page => this.setState({\n          page\n        }),\n        onPageSizeChange: (pageSize, page) => this.setState({\n          page,\n          pageSize\n        }),\n        onExpandedChange: expanded => this.setState({\n          expanded\n        }),\n        onResizedChange: resized => this.setState({\n          resized\n        }),\n        onFilteredChange: filtered => this.setState({\n          filtered\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"pre\", {\n        children: /*#__PURE__*/_jsxDEV(\"code\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"this.state ===\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 13\n          }, this), \" \", JSON.stringify(this.state.resized, null, 2), JSON.stringify(this.state.sorted, null, 2), JSON.stringify(this.state.filtered, null, 2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Tips, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LogoEbay, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Logo, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nrender( /*#__PURE__*/_jsxDEV(App, {}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 326,\n  columnNumber: 8\n}, this), document.getElementById(\"root\"));","map":{"version":3,"sources":["/home/nathaniel/src/git/reactDataTable/src/index.js"],"names":["React","render","makeData","Logo","LogoEbay","Tips","JSONTree","ReactTable","JSONtheme","scheme","author","base00","base01","base02","base03","base04","base05","base06","base07","base08","base09","base0A","base0B","base0C","base0D","base0E","base0F","Field","Component","constructor","props","hasFocus","state","value","dirty","valid","updateField","e","validate","target","setState","updateFunc","name","handleFocus","handleBlur","handleLabelClick","preventDefault","refs","input","focus","str","validation","match","focusClass","length","validClass","validMessage","label","icon","type","subtype","required","SearchBar","handleSubmit","event","console","log","fields","p","Object","keys","filter","k","params","map","rows","pageSize","page","email","message","number","makeDefaultState","field","content","obj","i","componentDidMount","renderFields","bind","data","columns","sorted","expanded","resized","filtered","loading","loadingText","App","prop","fetchColumns","resultset","fetch","then","response","json","result","catch","err","rowEvent","onClick","row","rowIndex","details","id","fetchData","array","key","Qstr","join","pages","Math","ceil","getColumns","headers","whitelist","indexOf","column","Header","accessor","slice","toUpperCase","substr","Cell","JSON","stringify","document","getElementById"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { render } from \"react-dom\";\nimport { makeData, Logo, LogoEbay, Tips } from \"./Utils\";\n\nimport JSONTree from 'react-json-tree';\n// Import React Table\nimport ReactTable from \"react-table\";\nimport \"react-table/react-table.css\";\n\nconst JSONtheme = {\n  scheme: 'monokai',\n  author: 'wimer hazenberg (http://www.monokai.nl)',\n  base00: '#272822',\n  base01: '#383830',\n  base02: '#49483e',\n  base03: '#75715e',\n  base04: '#a59f85',\n  base05: '#f8f8f2',\n  base06: '#f5f4f1',\n  base07: '#f9f8f5',\n  base08: '#f92672',\n  base09: '#fd971f',\n  base0A: '#f4bf75',\n  base0B: '#a6e22e',\n  base0C: '#a1efe4',\n  base0D: '#66d9ef',\n  base0E: '#ae81ff',\n  base0F: '#cc6633'\n}\n\nclass Field extends React.Component {\n  constructor(props){\n    super(props);\n    this.hasFocus = false;\n    this.state={value: \"\", dirty:false, valid:false}\n  }\n  updateField(e){\n    var valid = this.validate(e.target.value)\n    this.setState({value: e.target.value, dirty:true, valid:valid});\n    this.props.updateFunc(this.props.name, e.target.value, valid)\n  }\n  handleFocus(){\n    this.setState({hasFocus:true});\n  }\n  handleBlur(){\n    this.setState({hasFocus:false});\n  }\n  handleLabelClick(e){\n    e.preventDefault();\n    if(this.state.hasFocus) return false;\n    this.refs.input.focus();\n    this.setState({hasFocus: true})\n  }\n  validate(str){\n    if (this.props.validation != null)\n      return str.match(this.props.validation);\n    return false;\n  }\n  render(){\n    //Add-ons for the component\n    const focusClass = this.state.value.length || this.state.hasFocus ? 'active' : \"\";\n    const validClass = !this.state.dirty ? \"\" : this.state.valid ? \"valid\" : \"invalid\";\n    const validMessage = this.props.validMessage ? <span className=\"valid-message\">({this.props.validMessage})</span> : \"\";\n    const label = this.props.label ? \n              <label htmlFor={this.props.name} onClick={(e)=>{this.handleLabelClick(e)}}>{this.props.label} {validMessage}</label> : \"\";\n    const icon = !this.props.icon ? \"\" : this.state.valid ? <i className={`fa fa-thumbs-up`} /> : <i className={`fa fa-${this.props.icon}`} />;\n    \n    //component -- switch this to an HOC later\n    switch(this.props.type){\n      case 'input':\n        return(\n          <td className={`form-group ${focusClass}`} valign=\"top\">\n            <div>{label}</div>\n            <input ref=\"input\" className={`form-control  ${validClass}`} name={this.props.name} id={this.props.name} type={this.props.subtype} required={this.props.required} value={this.state.value} onChange={(e)=>{this.updateField(e)}} onFocus={(e)=>{this.handleFocus()}} onBlur={(e)=>{this.handleBlur()}} />\n            {icon}\n          </td>\n        )\n      case 'textarea':\n        return (\n          <td className={`form-group ${focusClass}`} align=\"top\">\n            <div>{label}</div>\n            <textarea ref=\"input\" className={`form-control  ${validClass}`} name={this.props.name} id={this.props.name} required={this.props.required} onChange={(e)=>{this.updateField(e)}} onFocus={(e)=>{this.handleFocus()}} onBlur={(e)=>{this.handleBlur()}}>{this.state.value}</textarea>\n            {icon}\n          </td>\n        )\n      default:\n        return <td>incomplete field</td>\n    }  \n  }\n}\n\n\nclass SearchBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.fields = [\n    {name:'keywords', type:'input', subtype:'text', label:\"Keywords\", icon:\"user\", validation:'name', required:true, validMessage:\"\", valid:false},\n    {name:'minprice', type:'input', subtype:'text', label:\"Min Price\", icon:\"user\", validation:'number', required:false, validMessage:\"\", valid:false, value:0},\n    {name:'maxprice', type:'input', subtype:'text', label:\"Max Price\", icon:\"user\", validation:'number', required:false, validMessage:\"\", valid:false, value:100},\n    ]\n        this.validation={\n      /*whatever regex rules you want. There's no reason to restrict validation to a regex but I'm laaaaazy.*/ \n      email:/[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9-]+(\\.[a-z0-9-]+)*/,\n      name:/[a-zA-Z0-9]{3,}/,\n      message:/.?/,\n      number:/\\d+/\n    }\n    this.state = makeDefaultState()\n    this.fields.map(field=>{\n      this.state[field.name] = {content:false, valid:false}\n    });\n  }\n    \n  handleSubmit = (event) => {\n    event.preventDefault();\n    console.log(this.state);\n    console.log(this.fields);\n    console.log(event);\n    let p = {};\n    p = Object.keys(this.state).filter(k => this.state[k].valid);\n    let params = {}\n    p.map( k => params[k] = event.target[k].value);\n    params.rows = this.state.pageSize\n    params.page = this.state.page\n//    event.target.keywords.value;\n    console.log(params);\n    this.props.handleSubmit(params);\n  };\n  updateField(field, value, valid){\n    var obj = {};\n    obj[field] = {content:value, valid:valid};\n    this.setState(obj);\n  }\n  validate(e){\n    e.preventDefault();\n    for(let i in this.state){\n     if (this.fields[i] != null)\n        if(!this.state[i].valid && this.fields[i].required) return false;\n//        if(!this.state[i].valid) return false;\n    }\n    console.log('all clear')\n    return true;\n  }\n  componentDidMount() {\n    console.log('App componentDidMount')\n  }\n  renderFields(){\n    return this.fields.map(field=>{\n      return <Field type={field.type} subtype={field.subtype} name={field.name} label={field.label} required={field.required} key={field.name} updateFunc={this.updateField.bind(this)} validation={this.validation[field.validation]} validMessage={field.validMessage} icon={field.icon} value={field.value}/>\n    })\n  }\n  render() {\n    return (\n      <form onSubmit={(e)=>{if (this.validate(e)) this.handleSubmit(e)}}>\n      <table><tr> \n       {this.renderFields()}\n        <td className=\"container\">\n          <input className=\"\" type=\"submit\" value=\"Send\" />\n        </td>\n      </tr></table>\n      </form>\n    );\n  }\n}\n\nconst makeDefaultState = () => ({\n  data: [],\n  columns: [],\n  sorted: [],\n  page: 0,\n  pageSize: 10,\n  expanded: {},\n  resized: [],\n  filtered: [],\n  loading: true,\n  loadingText: \"Loading..\",\n  rows: 10\n});\n\nclass App extends React.Component {\n  constructor(prop) {\n    super(prop);\n   this.state = makeDefaultState();\n    this.rowEvent = {\n      onClick: (e, row, rowIndex) => {\n        this.setState({details: true, id:rowIndex});\n      }\n    };\n    this.fetchData = this.fetchData.bind(this);\n  }\n  componentDidMount() {\n    console.log('App componentDidMount')\n  }\n\n  fetchData(params) {\n    this.setState({loading: true});\n    this.setState({loadingText: \"Loading\"});\n    //orkerGlobalScope.fetch(\"http://yogapants.ewb.ai:8080/data?test=test\", {\n\n    let array = Object.keys(params).map( key => key+'='+params[key]);\n    console.log('fetchData: '+array);\n    let Qstr = array.join('&');\n    if (Qstr.length > 0)\n      Qstr = '?'+Qstr;\n\n    console.log(\"sending get request, Query String: [\"+Qstr+\"]\");\n    fetch(\"http://skyhawk.grandstreet.group:8080/myapp\"+Qstr)\n      .then(response => response.json())\n      .then((result) => {\n        console.log(\"result\");\n        this.setState({\n          loading: false,\n          data: result.data,\n          pages: Math.ceil(result.data.length / this.state.pageSize)\n        });\n      })\n      .catch((err) => {\n        console.log(\"API Call returned invalid JSON\");\n        console.log(err);\n      });\n  }\n  fetchColumns = (resultset) => {\n    this.setState({loading: true});\n    this.setState({loadingText: \"Loading\"});\n    console.log(\"sending get request\");\n    //orkerGlobalScope.fetch(\"http://yogapants.ewb.ai:8080/data?test=test\", {\n\n    fetch(\"http://mx.ewb.ai:8080/myapp?keywords=\"+resultset)\n      .then(response => response.json())\n      .then((result) => {\n        console.log(\"result\");\n        //console.log(result);\n        this.setState({\n          loading: false,\n          data: result.data\n        });\n      })\n      .catch((err) => {\n        console.log(\"API Call returned invalid JSON\");\n        console.log(err);\n      });\n  }\n  getColumns() {\n    const { data } = this.state;\n    //console.log(data);\n    if (data.length <= 0)\n      return data;\n    \n    let headers = {'condition_conditionDisplayName':'condition','listingInfo_bestOfferEnabled':'Has BestOffer','listingInfo_buyItNowAvailable':'Has BuyItNow','listingInfo_endTime':'EndTime','listingInfo_listingType':'ListingType','listingInfo_watchCount':'WatchCount','returnsAccepted':'Can Return','sellingStatus_convertedCurrentPrice_content':'Current Price','sellingStatus_timeLeft':'Time Left','shippingInfo_handlingTime':'Handling Time','shippingInfo_shipToLocations':'ShipTo'};\n    let whitelist = ['error','condition_conditionDisplayName','country','itemId','listingInfo_bestOfferEnabled','listingInfo_buyItNowAvailable','listingInfo_endTime','listingInfo_listingType','listingInfo_watchCount','location','returnsAccepted','sellingStatus_convertedCurrentPrice_content','sellingStatus_timeLeft','shippingInfo_handlingTime','shippingInfo_shipToLocations','title','viewItemURL'];\n    //\n    return Object.keys(data[0]).filter( key => whitelist.indexOf(key) >= 0)\n      .map(key => {\n      let column = {\n        Header: key,\n        accessor: key\n      };\n      \n      if (headers[key] != null) {\n        column.Header = headers[key]\n      }\n      let str = column.Header\n      column.Header = str.slice(0, 1).toUpperCase() + str.substr(1,str.length);\n\n      //  view data munger\n      //\n      if (key.match(/[Uu][Rr][Ll]/)) {\n        column.Cell = row => (\n          <a href={row.value} target=\"_blank\">{key}</a>\n        )\n      }\n      return column;\n    });\n  }\n  render() {\n    const columns = this.getColumns();\n    const { data, rows, pages } = this.state;\n    return (\n      <div>\n      <div>\n  <SearchBar handleSubmit={this.fetchData} keywords=\"type some keywords\"/>\n      </div>\n        <ReactTable\n      manual\n      data={data}\n      columns={columns}\n      pages={pages}\n      loading={this.state.loading}\n      loadingText={this.state.loadingText}\n      defaultPageSize={20}\n      filterable\n      className=\"-striped -highlight\"\n      sorted={this.state.sorted}\n      page={this.state.page}\n      pageSize={this.state.pageSize}\n      expanded={this.state.expanded}\n      resized={this.state.resized}\n      filtered={this.state.filtered}\n      // Callbacks\n      onSortedChange={sorted => this.setState({ sorted })}\n      onPageChange={page => this.setState({ page })}\n      onPageSizeChange={(pageSize, page) =>\n        this.setState({ page, pageSize })}\n      onExpandedChange={expanded => this.setState({ expanded })}\n      onResizedChange={resized => this.setState({ resized })}\n      onFilteredChange={filtered => this.setState({ filtered })}\n        />\n\n        <br />\n          <pre>\n          <code>\n            <strong>this.state ===</strong>{\" \"}\n            {JSON.stringify(this.state.resized, null, 2)}\n            {JSON.stringify(this.state.sorted, null, 2)}\n            {JSON.stringify(this.state.filtered, null, 2)}\n          </code>\n        </pre>\n        <Tips />\n        <LogoEbay />\n        <Logo />\n      </div>\n    );\n  }\n}\n\nrender(<App />, document.getElementById(\"root\"));\n\n"]},"metadata":{},"sourceType":"module"}